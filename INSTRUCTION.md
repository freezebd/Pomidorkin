# Инструкция по использованию системы управления микроклиматом "Помидоркин"

## Подготовка к работе

### Подключение оборудования
1. Подключите датчики к контроллеру:
   - Датчик воздуха (адрес 4) к пинам RX (16) и TX (17)
   - Датчики почвы (адреса 1 и 3) к тем же пинам RX и TX
2. Подключите реле к шине I2C:
   - Реле 1 (адрес 0x09) - управление воздухом
   - Реле 2 (адрес 0x08) - управление почвой
   - Реле 3 (адрес 0x0A) - таймеры

### Первый запуск
1. При первом запуске система создаст точку доступа WiFi с именем "AP"
2. Подключитесь к этой сети с паролем "12345678"
3. Откройте в браузере адрес http://192.168.4.1
4. Перейдите в раздел "Настройки WiFi" и настройте подключение к вашей сети

## Основные функции

### Управление температурой воздуха
1. Включите переключатель "Нагрев" в разделе "Воздух"
2. Настройте параметры:
   - Дневная температура (по умолчанию 25°C)
   - Ночная температура (по умолчанию 20°C)
   - Время начала дня (по умолчанию 6:00)
   - Время начала ночи (по умолчанию 20:00)
   - Гистерезис (0.5°C, 1°C, 2°C, 3°C)
3. Система автоматически будет поддерживать заданную температуру:
   - Днем: заданная дневная температура
   - Ночью: заданная ночная температура
   - При достижении температуры + гистерезис реле выключится
   - При падении температуры - гистерезис реле включится

### Управление влажностью воздуха
1. Включите переключатель "Увлажнение" в разделе "Воздух"
2. Настройте параметры:
   - Целевая влажность
   - Гистерезис
3. Система автоматически будет поддерживать заданную влажность:
   - При падении влажности ниже порога включится увлажнитель
   - При достижении порога + гистерезис увлажнитель выключится

### Управление влажностью почвы
1. Включите переключатель "Полив" для нужного датчика почвы
2. Настройте параметры:
   - Целевая влажность
   - Гистерезис
3. Система автоматически будет поддерживать заданную влажность:
   - При падении влажности ниже порога включится полив
   - При достижении порога + гистерезис полив выключится

### Настройка таймеров
1. **Таймер 1** (простой таймер):
   - Включите переключатель "Реле 1"
   - Установите время включения и выключения
   - Система автоматически будет включать/выключать реле по расписанию

2. **Таймер 6** (недельный таймер):
   - Включите переключатель "Реле 6 недельное"
   - Выберите алгоритм работы:
     - По времени (как таймер 1, но с выбором дней недели)
     - По температуре воздуха
     - По влажности воздуха
     - По влажности почвы 1
     - По влажности почвы 2
   - Настройте пороговые значения и гистерезис
   - Выберите дни недели для работы

### Управление реле
1. В разделе "Управление реле":
   - Нажмите "Сканировать" для поиска реле в сети I2C
   - В списке отобразятся найденные реле с их адресами
   - Для изменения адреса:
     - Введите старый адрес
     - Введите новый адрес (1-127)
     - Нажмите "Изменить адрес"

## Безопасность
1. При неисправности датчиков:
   - Система автоматически отключит соответствующие реле
   - При потере связи с датчиком воздуха (температура -80°C):
     - Реле нагрева воздуха автоматически отключится
     - Реле увлажнения воздуха автоматически отключится
   - При потере связи с датчиком почвы 1 (температура -80°C):
     - Реле полива почвы 1 автоматически отключится
   - При потере связи с датчиком почвы 2 (температура -80°C):
     - Реле полива почвы 2 автоматически отключится
   - На экране появится сообщение об ошибке
   - При восстановлении работы датчиков система продолжит работу

2. Защита от перегрева:
   - При достижении критической температуры система отключит нагрев
   - Необходимо проверить настройки и состояние оборудования

3. Автоматическое восстановление:
   - При восстановлении связи с датчиками система автоматически возобновит работу
   - Все настройки сохраняются и применяются после восстановления связи

## Устранение неполадок
1. Если система не подключается к WiFi:
   - Проверьте правильность введенных данных
   - Попробуйте перезапустить систему
   - Убедитесь, что сеть доступна

2. Если не работают датчики:
   - Проверьте подключение проводов
   - Убедитесь в правильности адресов датчиков
   - Проверьте питание датчиков

3. Если не работают реле:
   - Проверьте подключение к шине I2C
   - Убедитесь в правильности адресов реле
   - Проверьте питание реле

## Дополнительные функции
1. **Мониторинг**:
   - На главной странице отображаются текущие показания всех датчиков
   - Статус реле отображается с помощью светодиодов
   - Время работы системы и аптайм

2. **Настройки**:
   - Все настройки сохраняются в памяти
   - При перезапуске настройки восстанавливаются
   - Возможность сброса настроек на заводские

## Обновление прошивки
1. Подготовка:
   - Скачайте новую версию прошивки
   - Убедитесь в совместимости с вашей версией

2. Процесс обновления:
   - Загрузите прошивку через веб-интерфейс
   - Дождитесь завершения процесса
   - Система автоматически перезапустится

## Поддержка
При возникновении проблем:
1. Проверьте инструкции по эксплуатации датчиков
2. Убедитесь в правильности подключения
3. Проверьте настройки системы
4. При необходимости обратитесь к разработчику (freezebd@gmail.com)